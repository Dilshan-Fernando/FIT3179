{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width":"container",
  "background":"transparent",
  "params":[{
      "name": "country_select",
      "value": ["None"],
      "bind": {
        "input": "select",
        "options": [
          ["None"],
          ["Australia"],
          ["Iran"],
          ["Canada"],
          ["Brazil"],
          ["Russia"],
          ["Japan"],
          ["Indonesia"],
          ["Argentina"],
          ["South Africa"],
          ["South Korea"]
        ],
        "name": "Country Select: "
      }
    
    },
    {
      "name": "map_select",
      "value": ["Wildfire"],
      "bind": {
        "input": "select",
        "options": [
          ["Wildfire"],
          ["Rainfall"]
        ],
        "name": "Map Select: "}
    }
  ],
  "hconcat": [
    {"vconcat":
    [
      {"width": 1100,
  "height": 600,
  "title":{ 
    "text":"Most recently recorded landmass burnt by wildfires in every country",
    "fontSize":20
  },
  "projection": {"type": "equirectangular"},
  
  "layer": [
    {
      "data": {
        "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne1.topojson",
        "format": {"type": "topojson", "feature": "ne_50m_ocean"}
      },
      "mark": {"type": "geoshape", "fill": "skyblue"}
    },
    {
      "data": {
          "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne.topojson",
          "format": {"type": "topojson", "feature": "ne_110m_graticules_30"}
      },
      "mark": {"type": "geoshape", "fill": null, "stroke": "darkgray"}
    },
    
    {
      "data": {
        "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne1.topojson",
        "format": {"type": "topojson", "feature": "ne_50m_admin_0_countries"}
      },
      "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "black"}
    },


    {
      "data": {
      "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne.topojson",
      "format": {"type": "topojson", "feature": "ne_50m_admin_0_countries"}
      },
      "transform": 
        [
          {
            "lookup": "properties.NAME",
            "from": 
            {
              "data": {
                "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/annual-area-burnt-per-wildfire/annual-area-burnt-per-wildfire.csv"
              },
              "key": "Entity",
              "fields": ["Annual","Year"]
            
            }
          },
          {
            "filter": "datum.properties.NAME == country_select && map_select == 'None' || country_select == 'None' && map_select == 'None' || datum.properties.NAME == country_select && map_select == 'Wildfire' ||country_select == 'None' && map_select == 'Wildfire'"
          }
        ],
     "mark": {"type": "geoshape","stroke":"black"},
      "encoding": {
        "color": {
          "field": "Annual",
          "type": "quantitative",
          
          "scale": {"type": "log","range":["white","orange","red"]},
          "legend": null
        },
        "tooltip": [
            {"field": "properties.NAME", "type": "nominal","title":"Country"},
            {"field": "Annual", "type": "quantitative","title":"Hectares burnt", "format":"0.1f"},
            {"field": "Year", "type": "temporal"}
            ]
      }
    },
    {
        "data": {
    "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne1.topojson",
    "format": {"type": "topojson", "feature": "ne_50m_admin_0_countries"}
  },
  "transform": [
    {
      "lookup": "properties.ISO_A3",
      "from": {
        "data": {
          "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/annual-area-burnt-per-wildfire/annual-area-burnt-per-wildfire.csv"
        },
        "key": "Code",
        "fields": ["Annual","Year"]
      }
    },
    {
            "filter": "datum.properties.NAME == country_select && map_select == 'None' || country_select == 'None' && map_select == 'None' || datum.properties.NAME == country_select && map_select == 'Wildfire' ||country_select == 'None' && map_select == 'Wildfire'"
          }
  ],
  "mark": {"type": "geoshape"},
  "encoding": {
    "color": {
      "field": "Annual",
      "type": "quantitative",
      
      "scale": {"type": "log","range":["white","orange","red"]},
      "legend": {
        "orient": "bottom",
        "symbolSize": 400,
        "labelFontSize": 15,
        "titleFontSize": 16,
      "titleFontWeight": "bold",
      "cornerRadius":10
      },
      "title": "Area of land burnt (ha)"
    },
    "opacity": {
      "condition": {"param": "country_select", "value": 1},
      "value": 0.1
    },
    "tooltip": [
        {"field": "properties.NAME", "type": "nominal","title":"Country"},
        {"field": "Annual", "type": "quantitative","title":"Hectares burnt", "format":"0.1f"}
        ]
  }

    },


    {
      "data": {
      "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne.topojson",
      "format": {"type": "topojson", "feature": "ne_50m_admin_0_countries"}
      },
      "transform": 
        [
          {
            "lookup": "properties.NAME",
            "from": 
            {
              "data": {
                "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/average-precipitation-per-year.csv"
              },
              "key": "Entity",
              "fields": ["Annual precipitation","Year"]
            
            }
          },
          {
            "filter": "datum.properties.NAME == country_select && map_select == 'Rainfall' ||country_select == 'None' && map_select == 'Rainfall'"
          }
        ],
     "mark": {"type": "geoshape","stroke":"black"},
      "encoding": {
        "color": {
          "field": "Annual precipitation",
          "type": "quantitative",
          
          "scale": {"type": "log","range":["white","lightgreen","green"]},
          "legend": {
        "orient": "bottom",
        "symbolSize": 400,
        "labelFontSize": 15,
        "titleFontSize": 18,
      "titleFontWeight": "bold"
      }
        },
        "tooltip": [
            {"field": "properties.NAME", "type": "nominal","title":"Country"},
            {"field": "Annual precipitation", "type": "quantitative","title":"Annual rainfall in mm", "format":"0.1f"}
            ]
      }
    },
    {
        "data": {
    "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne1.topojson",
    "format": {"type": "topojson", "feature": "ne_50m_admin_0_countries"}
  },
  "transform": [
    {
      "lookup": "properties.ISO_A3",
      "from": {
        "data": {
          "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/average-precipitation-per-year.csv"
        },
        "key": "Code",
        "fields": ["Annual precipitation","Year"]
      }
    },
    {
            "filter": "datum.properties.NAME == country_select && map_select == 'Rainfall' ||country_select == 'None' && map_select == 'Rainfall'"
          }
  ],
  "mark": {"type": "geoshape"},
  "encoding": {
    "color": {
      "field": "Annual precipitation",
      "type": "quantitative",
      
      "scale": {"type": "log","range":["white","lightgreen","green"]},
      "title": "Annual rainfall in mm",
      "legend": null
    },
    "opacity": {
      "condition": {"param": "country_select", "value": 1},
      "value": 0.1
    },
    "tooltip": [
        {"field": "properties.NAME", "type": "nominal","title":"Country"},
        {"field": "Annual precipitation", "type": "quantitative","title":"Annual rainfall in mm", "format":"0.1f"},
        {"field": "Year", "type": "temporal"}
        ]
  }

    },




    {
        "data": {
          "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne.topojson",
          "format": {"type": "topojson", "feature": "ne_110m_admin_0_boundary_lines_land"}
        },
        "mark": {"type": "geoshape", "fill": null, "stroke": "black"}
      }
    ],
  "resolve": {
      "scale": {
        "color": "independent"
      }
      }  
      }
    ]},
    {"vconcat": [
    {"layer": 
    [
      {"width": 700,
     "height": 300,
     "title":{ 
    "text":"Annual landmass burnt in wildfires over time in each country",
    "fontSize":20,
    "fontWeight":"bold"
  },
     "layer":
      [
          {
              "data": 
              {
                  "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/annual-area-burnt-per-wildfire/annual-area-burnt-per-wildfire.csv"
              },
              "transform":
              [
                  {"filter": "country_select == 'None' && datum.Entity == 'Australia'||country_select == 'None' && datum.Entity == 'Iran'||country_select == 'None' && datum.Entity == 'Canada'||country_select == 'None' && datum.Entity == 'Brazil'||country_select == 'None' && datum.Entity == 'Russia'||country_select == 'None' && datum.Entity == 'Japan'||country_select == 'None' && datum.Entity == 'Indonesia'||country_select == 'None' && datum.Entity == 'Argentina'||country_select == 'None' && datum.Entity == 'South Africa'||country_select == 'None' && datum.Entity == 'South Korea' "}
              ],
              "mark": {"type": "line"},
              "encoding": {
                  "x": {"field": "Year", "type": "temporal","axis": {"gridColor": "black","title":{"titleFontSize":10}}},
                  "y": {"field": "Annual", "type": "quantitative","title":{"text":"Annual Land burnt","fontWeight":"bold"},"axis": {"gridColor": "darkgrey"}},
                  "color": {"field": "Entity", "type": "nominal","legend": {
                    "orient": "bottom",
                    "labelFontSize": 13,
                    "titleFontSize": 14,
      "titleFontWeight": "bold","title":"Country"
                  }},
                  "tooltip": [
                      {"field": "Annual", "type": "quantitative","title":"Hectares burnt", "format":"0.1f"},
                      {"field": "Year", "type": "temporal"},
                      {"field":"Entity","type":"nominal","title":"Country"}
                      ]
                  
              }
          
          },
          {
              "data": 
              {
                  "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/annual-area-burnt-per-wildfire/annual-area-burnt-per-wildfire.csv"
              },
              "transform":
              [
                  {"filter": "datum.Entity == country_select"}
              ],
              "mark": {"type": "bar"},
              "encoding": {
                  "x": {"field": "Year", "type": "temporal"},
                  "y": {"field": "Annual", "type": "quantitative","title":"Annual Land burnt"},
                  "color": {"field": "Entity", "type": "nominal"},
                  "tooltip": [
                      {"field": "Annual", "type": "quantitative","title":"Hectares burnt", "format":"0.1f"},
                      {"field": "Year", "type": "temporal"},
                      {"field":"Entity","type":"nominal","title":"Country"}
                      ]
              }
          
          },
          {
          
              "data": {"values": [{"x": 1950, "y": 1800}, {"x": 1950, "y": 8}]},
              "layer":
              [
                  {
                  "mark": {"type": "rule", "color": "red"},
                  "encoding": {
                      "x": {"datum": 2023,"axis":null},
                      "x2": {"datum": 2024,"axis":null},
                      "y": {"datum": 1800},
                      "y2": {"datum": 1800}                
                      
                  }
                  },
                  {
                  "mark": {"type": "rule", "color": "red","size": 40, "opacity":0.3},
                  "encoding": {
                      "x": {"field": "x", "type": "quantitative"},
                      "y": {"field": "y", "type": "quantitative"},
                      "opacity":{}
                  }
                  },
                  {
                      "mark": "text",
                      "encoding": 
                      {
                          "x": {"datum":1950},
                          "y": {"datum":1600},
                          "text": {"datum":"El Nino Period"}
                      }
                  }
              ]
          }
        ]
    }]},
    {
      "layer": 
      [
        {
          "width": 700,
          "height": 300,
          "title":
          { 
              "text":"Number of wildfires occuring in each country",
              "fontSize":20
          },
          "data": 
          {
            "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/Wildfire.csv"
          },
          "transform":
            [
                {"filter": "country_select == 'None' && datum.Entity == 'Australia'||country_select == 'None' && datum.Entity == 'Iran'||country_select == 'None' && datum.Entity == 'Canada'||country_select == 'None' && datum.Entity == 'Brazil'||country_select == 'None' && datum.Entity == 'Russia'||country_select == 'None' && datum.Entity == 'Japan'||country_select == 'None' && datum.Entity == 'Indonesia'||country_select == 'None' && datum.Entity == 'Argentina'||country_select == 'None' && datum.Entity == 'South Africa'||country_select == 'None' && datum.Entity == 'South Korea' "}
            ],
          "mark": {"type": "line"},
          "encoding": {
            "x": {"field": "Year", "type": "temporal"},
            "y": {"field": "Annual number of fires", "type": "quantitative"},
            "color": {"field": "Entity", "type": "nominal","legend":null}
          }
        },
        {
              "data": 
              {
                  "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/Wildfire.csv"
              },
              "transform":
              [
                  {"filter": "datum.Entity == country_select"}
              ],
              "mark": {"type": "bar"},
          "encoding": {
            "x": {"field": "Year", "type": "temporal"},
            "y": {"field": "Annual number of fires", "type": "quantitative"},
            "color": {"value": "red"}
          }
          
          }
      ]
    }
     ],
      "resolve": {
      "scale": {
        "color": "independent"
      }
    }  
  }
    
]
}