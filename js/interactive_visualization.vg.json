{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width":"container",
  "background":"transparent",
  "params":[{
      "name": "country_select",
      "value": ["None"],
      "bind": {
        "input": "select",
        "options": [
          ["None"],
          ["Australia"],
          ["Iran"],
          ["Canada"],
          ["Brazil"],
          ["Russia"],
          ["Japan"],
          ["Indonesia"],
          ["Argentina"],
          ["South Africa"],
          ["South Korea"]
        ],
        "name": "Country Select: "
      }
    
    },
    {
      "name": "map_select",
      "value": ["Wildfire"],
      "bind": {
        "input": "select",
        "options": [
          ["Wildfire"],
          ["Rainfall"]
        ],
        "name": "Map Select: "}
    }
  ],
  "hconcat": [
    {"vconcat":
    [
      {"width": 1100,
  "height": 600,
  "title":{ 
    "text":"Most recently recorded landmass burnt by wildfires in every country",
    "fontSize":25
  },
  "projection": {"type": "equirectangular"},
  
  "layer": [
     
    {
      "data": {
        "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne1.topojson",
        "format": {"type": "topojson", "feature": "ne_50m_ocean"}
      },
      "mark": {"type": "geoshape", "fill": "skyblue"}
    },
    {
      "data": {
        "values": [
          {
            "lon1": 180,
            "lat1": -25,
            "lon2": -180,
            "lat2": 25
          }
        ]
      },
      "mark": {
        "type": "rect",
        "fill": "lightgrey",
        "opacity": 0.5,
        "stroke": "darkred",
        "strokeWidth": 2
      },
      "encoding": {
        "longitude": {"field": "lon1"},
        "latitude": {"field": "lat1"},
        "longitude2": {"field": "lon2"},
        "latitude2": {"field": "lat2"}
      }
    },
    {"data": {
        "values": [
          {
            "lon1": 1800,
            "lat1": 100
          }
        ]
      },
      "mark": {
        "type": "text",
        "align": "center", 
        "baseline": "middle", 
        "color": "black",
        "fontWeight": "bold",
        "fontSize": 20,
        "dx":150,
        "dy":300
      },
      "encoding": {
        
        "longitude": {"field": "lon1", "aggregate": "mean"},
       
        "latitude": {"field": "lat1", "aggregate": "mean"},
        
        "text": {"value": "Tropical area"}
      }
    },
    {
      "data": {
          "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne.topojson",
          "format": {"type": "topojson", "feature": "ne_110m_graticules_30"}
      },
      "mark": {"type": "geoshape", "fill": null, "stroke": "darkgray"}
    },
    
    {
      "data": {
        "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne1.topojson",
        "format": {"type": "topojson", "feature": "ne_50m_admin_0_countries"}
      },
      "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "black"}
    },


    {
      "data": {
      "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne.topojson",
      "format": {"type": "topojson", "feature": "ne_50m_admin_0_countries"}
      },
      "transform": 
        [
          {
            "lookup": "properties.NAME",
            "from": 
            {
              "data": {
                "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/annual-area-burnt-per-wildfire/annual-area-burnt-per-wildfire.csv"
              },
              "key": "Entity",
              "fields": ["Annual","Year"]
            
            }
          },
          {
            "filter": "datum.properties.NAME == country_select && map_select == 'None' || country_select == 'None' && map_select == 'None' || datum.properties.NAME == country_select && map_select == 'Wildfire' ||country_select == 'None' && map_select == 'Wildfire'"
          }
        ],
     "mark": {"type": "geoshape","stroke":"black"},
      "encoding": {
        "color": {
          "field": "Annual",
          "type": "quantitative",
          
          "scale": {"type": "log","range":["white","orange","red"]},
          "legend": null
        },
        "tooltip": [
            {"field": "properties.NAME", "type": "nominal","title":"Country"},
            {"field": "Annual", "type": "quantitative","title":"Hectares burnt", "format":"0.1f"}
            ]
      }
    },
    {
        "data": {
    "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne1.topojson",
    "format": {"type": "topojson", "feature": "ne_50m_admin_0_countries"}
  },
  "transform": [
    {
      "lookup": "properties.ISO_A3",
      "from": {
        "data": {
          "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/annual-area-burnt-per-wildfire/annual-area-burnt-per-wildfire.csv"
        },
        "key": "Code",
        "fields": ["Annual","Year"]
      }
    },
    {
            "filter": "datum.properties.NAME == country_select && map_select == 'None' || country_select == 'None' && map_select == 'None' || datum.properties.NAME == country_select && map_select == 'Wildfire' ||country_select == 'None' && map_select == 'Wildfire'"
          }
  ],
  "mark": {"type": "geoshape"},
  "encoding": {
    "color": {
      "field": "Annual",
      "type": "quantitative",
      
      "scale": {"type": "log","range":["white","orange","red"]},
      "legend": {
        "orient": "bottom",
        "symbolSize": 400,
        "labelFontSize": 15,
        "titleFontSize": 16,
      "titleFontWeight": "bold",
      "cornerRadius":10,
       "symbolStrokeWidth": 10
      },
      "title": "Area of land burnt (ha)"
    },
    "opacity": {
      "condition": {"param": "country_select", "value": 1},
      "value": 0.1
    },
    "tooltip": [
        {"field": "properties.NAME", "type": "nominal","title":"Country"},
        {"field": "Annual", "type": "quantitative","title":"Hectares burnt", "format":"0.1f"}
        ]
  }

    },


    {
      "data": {
      "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne.topojson",
      "format": {"type": "topojson", "feature": "ne_50m_admin_0_countries"}
      },
      "transform": 
        [
          {
            "lookup": "properties.NAME",
            "from": 
            {
              "data": {
                "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/average-precipitation-per-year.csv"
              },
              "key": "Entity",
              "fields": ["Annual precipitation","Year"]
            
            }
          },
          {
            "filter": "datum.properties.NAME == country_select && map_select == 'Rainfall' ||country_select == 'None' && map_select == 'Rainfall'"
          }
        ],
     "mark": {"type": "geoshape","stroke":"black"},
      "encoding": {
        "color": {
          "field": "Annual precipitation",
          "type": "quantitative",
          
          "scale": {"type": "log","range":["white","lightgreen","green"]},
          "legend": {
        "orient": "bottom",
        "symbolSize": 400,
        "labelFontSize": 15,
        "titleFontSize": 18,
      "titleFontWeight": "bold"
      }
        },
        "tooltip": [
            {"field": "properties.NAME", "type": "nominal","title":"Country"},
            {"field": "Annual precipitation", "type": "quantitative","title":"Annual rainfall in mm", "format":"0.1f"}
            ]
      }
    },
    {
        "data": {
    "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne1.topojson",
    "format": {"type": "topojson", "feature": "ne_50m_admin_0_countries"}
  },
  "transform": [
    {
      "lookup": "properties.ISO_A3",
      "from": {
        "data": {
          "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/average-precipitation-per-year.csv"
        },
        "key": "Code",
        "fields": ["Annual precipitation","Year"]
      }
    },
    {
            "filter": "datum.properties.NAME == country_select && map_select == 'Rainfall' ||country_select == 'None' && map_select == 'Rainfall'"
          }
  ],
  "mark": {"type": "geoshape"},
  "encoding": {
    "color": {
      "field": "Annual precipitation",
      "type": "quantitative",
      
      "scale": {"type": "log","range":["white","lightgreen","green"]},
      "title": "Annual rainfall in mm",
      "legend": null
    },
    "opacity": {
      "condition": {"param": "country_select", "value": 1},
      "value": 0.1
    },
    "tooltip": [
        {"field": "properties.NAME", "type": "nominal","title":"Country"},
        {"field": "Annual precipitation", "type": "quantitative","title":"Annual rainfall in mm", "format":"0.1f"},
        {"field": "Year", "type": "temporal"}
        ]
  }

    },



    
    {
        "data": {
          "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/js/ne.topojson",
          "format": {"type": "topojson", "feature": "ne_110m_admin_0_boundary_lines_land"}
        },
        "mark": {"type": "geoshape", "fill": null, "stroke": "black"}
      }
    ],
  "resolve": {
      "scale": {
        "color": "independent"
      }
      }  
      }
    ]},
    {"vconcat": [
    {"layer": 
    [
      {"width": 700,
     "height": 300,
     "title":{ 
    "text":"Annual landmass burnt in wildfires over time in each country",
    "fontSize":25,
    "fontWeight":"bold"
  },
     "layer":
      [{"data": {
        "values": [
          {
            "lon1": 2,
            "lat1": 1100
          }
        ]
      },
      "mark": {
        "type": "point",
        "size":200,
        "xOffset":26,"filled":"true"
      },
      "encoding": {
        
        "x": {"field": "lon1", "type": "temporal","axis":null},
       
        "y": {"field": "lat1", "aggregate": "mean"},
        "color":{"value":"orange"},
        "opacity": {
      "condition": {
        "test": "country_select == 'None'",
        "value": 1
      },
      "value": 0
    }
      }
    },
          {
              "data": 
              {
                  "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/annual-area-burnt-per-wildfire/annual-area-burnt-per-wildfire.csv"
              },
              "transform":
              [
                  {"filter": "country_select == 'None' && datum.Entity == 'Australia'||country_select == 'None' && datum.Entity == 'Iran'||country_select == 'None' && datum.Entity == 'Canada'||country_select == 'None' && datum.Entity == 'Brazil'||country_select == 'None' && datum.Entity == 'Russia'||country_select == 'None' && datum.Entity == 'Japan'||country_select == 'None' && datum.Entity == 'Indonesia'||country_select == 'None' && datum.Entity == 'Argentina'||country_select == 'None' && datum.Entity == 'South Africa'||country_select == 'None' && datum.Entity == 'South Korea' "}
              ],
              "mark": {"type": "line","size":5},
              "encoding": {
                  "x": {"field": "Year", "type": "temporal","axis": {"gridColor": "black","labelFontSize": 12,"titleFontSize":15}},
                  "y": {"field": "Annual", "type": "quantitative","title":{"text":"Annual area burnt (ha)","fontWeight":"bold"},"axis": {"gridColor": "darkgrey","labelFontSize": 12,"titleFontSize":15}},
                  "color": {"field": "Entity", "type": "nominal","legend": {
                    "orient": "bottom",
                    "labelFontSize": 13,
                    "titleFontSize": 15,
      "titleFontWeight": "bold","title":"Country",
       "symbolStrokeWidth": 10,
       "columns":2
                  }},
                  "tooltip": [
                      {"field": "Annual", "type": "quantitative","title":"Hectares burnt", "format":"0.1f"},
                      {"field": "Year", "type": "temporal","timeUnit":"year"},
                      {"field":"Entity","type":"nominal","title":"Country"}
                      ]
                  
              }
          
          },
          {
              "data": 
              {
                  "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/annual-area-burnt-per-wildfire/annual-area-burnt-per-wildfire.csv"
              },
              "transform":
              [
                  {"filter": "datum.Entity == country_select"}
              ],
              "mark": {"type": "bar","size":20},
              "encoding": {
                  "x": {"field": "Year", "type": "temporal","axis":null},
                  "y": {"field": "Annual", "type": "quantitative","title":"Annual Land burnt"},
                  "color": {"field": "Entity", "type": "nominal"},
                  "tooltip": [
                      {"field": "Annual", "type": "quantitative","title":"Hectares burnt", "format":"0.1f"},
                      {"field": "Year", "type": "temporal"},
                      {"field":"Entity","type":"nominal","title":"Country"}
                      ]
              }
          
          },
          {
          
              "data": {"values": [{"x": 1950, "y": 1800}, {"x": 1950, "y": 8}]},
              "layer":
              [
                  {
                  "mark": {"type": "rule", "color": "red"},
                  "encoding": {
                      "x": {"datum": 2023,"axis":null},
                      "x2": {"datum": 2024,"axis":null},
                      "y": {"datum": 1800},
                      "y2": {"datum": 1800}                
                      
                  }
                  },
                  {
                  "mark": {"type": "rule", "color": "red","size": 40, "opacity":0.3},
                  "encoding": {
                      "x": {"field": "x", "type": "quantitative","axis":null},
                      "y": {"field": "y", "type": "quantitative"},
                      "opacity": {
      "condition": {
        "test": "country_select == 'None'",
        "value": 0.3
      },
      "value": 0
    }
                  }
                  },
                  {
                      "mark": "text",
                      "encoding": 
                      {
                          "x": {"datum":1950},
                          "y": {"datum":1600},
                          "text": {"datum":"El Nino Period"},
                          "opacity": {
      "condition": {
        "test": "country_select == 'None'",
        "value": 1
      },
      "value": 0
    }
                      }
                  }
              ]
          }
        ]
    },
    {"data": {
        "values": [
          {
            "lon1": 1800,
            "lat1": 100
          }
        ]
      },
      "mark": {
        "type": "text",
        "align": "center", 
        "baseline": "middle", 
        "color": "black",
        "fontWeight": "bold",
        "fontSize": 15,
        "dx":400,
        "dy":100
      },
      "encoding": {
        
        "longitude": {"field": "lon1", "aggregate": "mean"},
       
        "latitude": {"field": "lat1", "aggregate": "mean"},
        
        "text": {"value": "Black Summer - Australia "},
        "opacity": {
      "condition": {
        "test": "country_select == 'None'",
        "value": 1
      },
      "value": 0
    }
      }
    }
    
  ]},
    {
      "layer": 
      [
        {
                  "data": {
                "values": [
                  {
                    "lon1": 1,
                    "lat1": 1
                  }
                ]
              },
              "mark": {
                "type": "point","filled":true,"color":"#E74C3C","size":200,"xOffset":-187,"yOffset":-140},
              "encoding": {
                
                "opacity": {
              "condition": {
                "test": "country_select == 'None'",
                "value": 1
              },
              "value": 0
            }
              }
            },
        {
          "width": 700,
          "height": 300,
          "title":
          { 
              "text":"Number of wildfires occuring in each country",
              "fontSize":25
          },
          "data": 
          {
            "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/Wildfire.csv"
          },
          "transform":
            [
                {"filter": "country_select == 'None' && datum.Entity == 'Australia'||country_select == 'None' && datum.Entity == 'Iran'||country_select == 'None' && datum.Entity == 'Canada'||country_select == 'None' && datum.Entity == 'Brazil'||country_select == 'None' && datum.Entity == 'Russia'||country_select == 'None' && datum.Entity == 'Japan'||country_select == 'None' && datum.Entity == 'Indonesia'||country_select == 'None' && datum.Entity == 'Argentina'||country_select == 'None' && datum.Entity == 'South Africa'||country_select == 'None' && datum.Entity == 'South Korea' "}
            ],
          "mark": {"type": "line","size":5,"point":true},
          "encoding": {
              "x": {"field": "Year", "type": "temporal","axis":{"labelFontSize": 12,"titleFontSize":15}},
            "y": {"field": "Annual number of fires", "type": "quantitative","axis":{"labelFontSize": 12,"titleFontSize":15},"title":"Number of fires"},
            "color": {"field": "Entity", "type": "nominal","legend":null},
            "tooltip": [
                      {"field": "Annual number of fires", "type": "quantitative","title":"Number of fires", "format":"0.1f"},
                      {"field": "Year", "type": "temporal","timeUnit":"year"},
                      {"field":"Entity","type":"nominal","title":"Country"}
                      ]
          }
        },
        
        {
          "data":
           {
              "values": 
              [
                {
                  "lon1": 1800,
                  "lat1": 100
                }
              ]
           },
          "mark": 
          {
              "type": "text",
              "align": "center", 
              "baseline": "middle", 
              "color": "black",
              "fontWeight": "bold",
              "fontSize": 15,
              "dx":250,
              "dy":20
           },
           "encoding":
          {
              "longitude": {"field": "lon1", "aggregate": "mean"},
              "latitude": {"field": "lat1", "aggregate": "mean"},
              "text": {"value": "87580 Fires - Brazil "},
              "opacity": 
              {
                "condition":
                 {
                    "test": "country_select == 'None'",
                    "value": 1
                 },
                "value": 0
              }
            }
        },
        {
              "data": 
              {
                  "url": "https://raw.githubusercontent.com/Dilshan-Fernando/FIT3179/refs/heads/main/data/Wildfire.csv"
              },
              "transform":
              [
                  {"filter": "datum.Entity == country_select"}
              ],
              "mark": {"type": "bar","size":20},
          "encoding": {
            "x": {"field": "Year", "type": "temporal"},
            "y": {"field": "Annual number of fires", "type": "quantitative"},
            "color": {"value": "red"},
            "tooltip": [
                      {"field": "Annual number of fires", "type": "quantitative","title":"Number of fires", "format":"0.1f"},
                      {"field": "Year", "type": "temporal","timeUnit":"year"},
                      {"field":"Entity","type":"nominal","title":"Country"}
                      ]
          }
          
          }
        
      ]
    }
    ],
      "resolve": {
      "scale": {
        "color": "independent"
      }
    }  
  }
    
]
}